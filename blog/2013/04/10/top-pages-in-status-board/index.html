<!doctype html><html><head><meta charset=utf-8><meta name=keywords content><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFJ7SZKLR0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZFJ7SZKLR0",{anonymize_ip:!1})}</script><meta name=robots content="index,follow"><link rel=stylesheet href=https://hiltmon.com/css/main.css><link rel=stylesheet href=https://hiltmon.com/css/all.css><link rel=stylesheet href=https://hiltmon.com/css/carbon.css><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic' rel=stylesheet type=text/css><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script><title>Top Pages in Status Board</title></head><body><div id=container><header id=header><img id=logo src=https://hiltmon.com/images/hiltmon-logo-174.png><h1 id=title><a href=https://hiltmon.com/>Hiltmon</a></h1><h2 id=sub-title>On walkabout in life and technology</h2></header><nav id=menu><ul><li><a href=https://hiltmon.com/about/ title="about me">About</a></li><li><a href=https://hiltmon.com/ title="blog section">Blog</a></li><li><a href=https://hiltmon.com/code/ title=code>Code</a></li><li><a href=https://hiltmon.com/tags/ title="tags section">Tags</a></li><li><a href=https://hiltmon.com/archives/ title="archives section">Archives</a></li></ul></nav><section id=content><p class=meta-data><span class=post-date>Apr 10, 2013 4:06 PM</span></p><div class=tag-group><div class=tag><span class=tag-text>| <a href=https://hiltmon.com/tags/status-board>Status Board</a></span></div></div><h1 class=post-title>Top Pages in Status Board</h1><div class=post-body><p><span class=light>Google has finally deprecated their GAPI interface which this used to talk to Google Analytics, sorry folks, it will no longer work. See the <a href=https://hiltmon.com/blog/2015/06/07/new-google-analytics-for-status-board-server-edition/>New Google Analytics for Status Board Server Edition</a> for an updated version.</span></p><p>Following up this morning&rsquo;s <a href=https://hiltmon.com/blog/2013/04/10/google-analytics-for-status-board/>Google Analytics for Status Board</a> graph on <a href="https://itunes.apple.com/us/app/status-board/id449955536?mt=8&uo=4&at=10l894">Status Board</a>, I also wanted a <strong>top pages for today</strong> view for Hiltmon.com.</p><p><span class=light>See also <a href=https://hiltmon.com/blog/2013/04/15/hourly-analytics-for-status-board/>Hourly Stats</a> and <a href=https://hiltmon.com/blog/2013/04/17/add-ga-os-and-browser-to-status-board/>OS and Browser Stats</a>.</span></p><figure><img src=images/status-board-pages.jpg width=640 height=480></figure><p>The steps are all the same as <a href=https://hiltmon.com/blog/2013/04/10/google-analytics-for-status-board/>Google Analytics for Status Board</a>, so follow along, only replace those script and the launcher files with these.</p><p>The script code is in <code>status_board_pages.rb</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#177500>#!/usr/bin/env ruby</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># status_board_pages.rb</span>
</span></span><span style=display:flex><span><span style=color:#177500># Hilton Lipschitz</span>
</span></span><span style=display:flex><span><span style=color:#177500># Twitter/ADN: @hiltmon </span>
</span></span><span style=display:flex><span><span style=color:#177500># Web: https://hiltmon.com</span>
</span></span><span style=display:flex><span><span style=color:#177500># Use and modify freely, attribution appreciated</span>
</span></span><span style=display:flex><span><span style=color:#177500>#</span>
</span></span><span style=display:flex><span><span style=color:#177500># Script to generate @panic status board files for Google Analytics web stats</span>
</span></span><span style=display:flex><span><span style=color:#177500>#</span>
</span></span><span style=display:flex><span><span style=color:#177500># Run this regularly to update status board</span>
</span></span><span style=display:flex><span><span style=color:#177500>#</span>
</span></span><span style=display:flex><span><span style=color:#177500># For how to set up, see https://hiltmon.com/blog/2013/04/10/top-pages-in-status-board/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Include the gem</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>require</span> <span style=color:#c41a16>&#39;rubygems&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>require</span> <span style=color:#c41a16>&#39;gattica&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>require</span> <span style=color:#c41a16>&#39;date&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>require</span> <span style=color:#c41a16>&#39;json&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Your Settings</span>
</span></span><span style=display:flex><span><span style=color:#000>google_email</span>   <span style=color:#000>=</span> <span style=color:#c41a16>&#39;hiltmon@gmail.com&#39;</span>  <span style=color:#177500># Your google login</span>
</span></span><span style=display:flex><span><span style=color:#000>google_pwd</span>     <span style=color:#000>=</span> <span style=color:#c41a16>&#39;I_aint_sayin&#39;</span>   <span style=color:#177500># Must be a single use password if 2 factor is set up</span>
</span></span><span style=display:flex><span><span style=color:#000>the_title</span>      <span style=color:#000>=</span> <span style=color:#c41a16>&#34;Hiltmon.Com Top Pages Today&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>file_name</span>      <span style=color:#000>=</span> <span style=color:#c41a16>&#34;hiltmonpages&#34;</span>       <span style=color:#177500># The file name to use (Assumes .CSV)</span>
</span></span><span style=display:flex><span><span style=color:#000>dropbox_folder</span> <span style=color:#000>=</span> <span style=color:#c41a16>&#34;/Users/Hiltmon/Dropbox/Data&#34;</span> <span style=color:#177500># The path to a folder on your local DropBox</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Configuration</span>
</span></span><span style=display:flex><span><span style=color:#000>metrics</span> <span style=color:#000>=</span> <span style=color:#000>[</span><span style=color:#c41a16>&#39;pageviews&#39;</span><span style=color:#000>]</span> <span style=color:#177500>#, &#39;uniquePageviews&#39;, &#39;newVisits&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#000>colors</span> <span style=color:#000>=</span> <span style=color:#000>[</span><span style=color:#c41a16>&#39;red&#39;</span>, <span style=color:#c41a16>&#39;green&#39;</span>, <span style=color:#c41a16>&#39;blue&#39;</span><span style=color:#000>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Login</span>
</span></span><span style=display:flex><span><span style=color:#000>ga</span> <span style=color:#000>=</span> <span style=color:#000>Gattica</span><span style=color:#000>.</span><span style=color:#000>new</span>({ 
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:email</span> <span style=color:#000>=&gt;</span> <span style=color:#000>google_email</span>, 
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:password</span> <span style=color:#000>=&gt;</span> <span style=color:#000>google_pwd</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Get a list of accounts</span>
</span></span><span style=display:flex><span><span style=color:#000>accounts</span> <span style=color:#000>=</span> <span style=color:#000>ga</span><span style=color:#000>.</span><span style=color:#000>accounts</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Choose the first account</span>
</span></span><span style=display:flex><span><span style=color:#000>ga</span><span style=color:#000>.</span><span style=color:#000>profile_id</span> <span style=color:#000>=</span> <span style=color:#000>accounts</span><span style=color:#000>.</span><span style=color:#000>first</span><span style=color:#000>.</span><span style=color:#000>profile_id</span>
</span></span><span style=display:flex><span><span style=color:#177500># ga.profile_id = accounts[1].profile_id # OR second account</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Get the data</span>
</span></span><span style=display:flex><span><span style=color:#000>data</span> <span style=color:#000>=</span> <span style=color:#000>ga</span><span style=color:#000>.</span><span style=color:#000>get</span>({ 
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:start_date</span>   <span style=color:#000>=&gt;</span> <span style=color:#000>Date</span><span style=color:#000>.</span><span style=color:#000>today</span><span style=color:#000>.</span><span style=color:#000>to_s</span><span style=color:#000>.</span><span style=color:#000>split</span>(<span style=color:#c41a16>&#39;T&#39;</span>)<span style=color:#000>[</span><span style=color:#1c01ce>0</span><span style=color:#000>]</span>,
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:end_date</span>     <span style=color:#000>=&gt;</span> <span style=color:#000>Date</span><span style=color:#000>.</span><span style=color:#000>today</span><span style=color:#000>.</span><span style=color:#000>to_s</span><span style=color:#000>.</span><span style=color:#000>split</span>(<span style=color:#c41a16>&#39;T&#39;</span>)<span style=color:#000>[</span><span style=color:#1c01ce>0</span><span style=color:#000>]</span>,
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:dimensions</span>   <span style=color:#000>=&gt;</span> <span style=color:#000>[</span><span style=color:#c41a16>&#39;pageTitle&#39;</span><span style=color:#000>]</span>,
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:metrics</span>      <span style=color:#000>=&gt;</span> <span style=color:#000>metrics</span>,
</span></span><span style=display:flex><span>    <span style=color:#c41a16>:sort</span>         <span style=color:#000>=&gt;</span> <span style=color:#000>[</span><span style=color:#c41a16>&#39;-pageviews&#39;</span><span style=color:#000>]</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># # Make the CSV file</span>
</span></span><span style=display:flex><span><span style=color:#000>File</span><span style=color:#000>.</span><span style=color:#000>open</span>(<span style=color:#c41a16>&#34;</span><span style=color:#c41a16>#{</span><span style=color:#000>dropbox_folder</span><span style=color:#c41a16>}</span><span style=color:#c41a16>/</span><span style=color:#c41a16>#{</span><span style=color:#000>file_name</span><span style=color:#c41a16>}</span><span style=color:#c41a16>.csv&#34;</span>, <span style=color:#c41a16>&#34;w&#34;</span>) <span style=color:#a90d91>do</span> <span style=color:#000>|</span><span style=color:#000>f</span><span style=color:#000>|</span>
</span></span><span style=display:flex><span>  <span style=color:#000>f</span><span style=color:#000>.</span><span style=color:#000>write</span> <span style=color:#c41a16>&#34;15%, 85%</span><span style=color:#c41a16>\n</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>count</span> <span style=color:#000>=</span> <span style=color:#1c01ce>0</span>
</span></span><span style=display:flex><span>  <span style=color:#000>data</span><span style=color:#000>.</span><span style=color:#000>to_h</span><span style=color:#000>[</span><span style=color:#c41a16>&#39;points&#39;</span><span style=color:#000>].</span><span style=color:#000>each</span> <span style=color:#a90d91>do</span> <span style=color:#000>|</span><span style=color:#000>point</span><span style=color:#000>|</span>
</span></span><span style=display:flex><span>    <span style=color:#000>the_page</span> <span style=color:#000>=</span> <span style=color:#000>point</span><span style=color:#000>.</span><span style=color:#000>to_h</span><span style=color:#000>[</span><span style=color:#c41a16>&#34;dimensions&#34;</span><span style=color:#000>].</span><span style=color:#000>first</span><span style=color:#000>[</span><span style=color:#c41a16>:pageTitle</span><span style=color:#000>].</span><span style=color:#000>gsub</span>(<span style=color:#c41a16>&#39;,&#39;</span>, <span style=color:#c41a16>&#39;&#39;</span>)<span style=color:#000>.</span><span style=color:#000>gsub</span>(<span style=color:#c41a16>&#39; - The Hiltmon&#39;</span>, <span style=color:#c41a16>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#000>the_data</span> <span style=color:#000>=</span> <span style=color:#000>point</span><span style=color:#000>.</span><span style=color:#000>to_h</span><span style=color:#000>[</span><span style=color:#c41a16>&#34;metrics&#34;</span><span style=color:#000>].</span><span style=color:#000>map</span> { <span style=color:#000>|</span><span style=color:#000>e</span><span style=color:#000>|</span> <span style=color:#000>e</span><span style=color:#000>.</span><span style=color:#000>values</span><span style=color:#000>.</span><span style=color:#000>first</span> }
</span></span><span style=display:flex><span>    <span style=color:#000>f</span><span style=color:#000>.</span><span style=color:#000>write</span> <span style=color:#000>the_data</span><span style=color:#000>.</span><span style=color:#000>join</span>(<span style=color:#c41a16>&#39;,&#39;</span>) <span style=color:#000>+</span> <span style=color:#c41a16>&#34;,&#34;</span> <span style=color:#000>+</span> <span style=color:#000>the_page</span> <span style=color:#000>+</span> <span style=color:#c41a16>&#34;</span><span style=color:#c41a16>\n</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>count</span> <span style=color:#000>+=</span> <span style=color:#1c01ce>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>break</span> <span style=color:#a90d91>if</span> <span style=color:#000>count</span> <span style=color:#000>&gt;=</span> <span style=color:#1c01ce>20</span>
</span></span><span style=display:flex><span>  <span style=color:#a90d91>end</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>end</span>
</span></span></code></pre></div><p>Once again, edit the script to change:</p><ul><li>The <strong>email</strong> and <strong>password</strong> you use to access Google Analytics.</li><li>The <strong>title</strong>, <strong>file_name</strong> and <strong>dropbox_path</strong> to save the data on your computer and dropbox.</li><li>The home title at line 60: replace <code>- The Hiltmon</code> with your own tagline.</li></ul><p>The launcher code is in <code>com.hiltmon.status_board_pages.plist</code>:</p><pre tabindex=0><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;
&lt;plist version=&#34;1.0&#34;&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.hiltmon.status_board_pages&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/Users/Hiltmon/Dropbox/Scripts/status_board_pages.rb&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;StartInterval&lt;/key&gt;
    &lt;integer&gt;300&lt;/integer&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre><p>Update it too for your paths and names, the copy and load it.</p><p><strong>Add it to Status Board</strong></p><p>Follow the instructions in <a href=http://www.panic.com/statusboard/docs/table_tutorial.pdf>Table Tutorial (PDF)</a>:</p><ul><li>Share the CSV file on your DropBox</li><li>Mail that link to yourself</li><li>Tap the link in the email on your iPad to open it in Safari</li><li>Copy the link from Safari (minus the bit after the <code>?</code>)</li><li>Add a new <strong>table</strong> to your Status Board and paste in the link (it offers to do this by default).</li></ul><p>Enjoy.</p><p><em>Update: All the scripts can be downloaded from Github at <a href=https://github.com/hiltmon/status-board-ga>https://github.com/hiltmon/status-board-ga</a>.</em></p><p><em>Follow the author as <a href=https://twitter.com/hiltmon>@hiltmon</a> on Twitter and <a href=http://alpha.app.net/hiltmon>@hiltmon</a> on App.Net. Mute <code>#xpost</code> on one.</em></p></div><p class=post-mark><span class="fas fa-envelope"></span>
<span>Posted By Hilton Lipschitz</span>
&#183;
<span class="fas fa-clock"></span>
<span>Apr 10, 2013 4:06 PM</span></p><div class=pagination><ul><li class=post-previous><a href=https://hiltmon.com/blog/2013/04/11/natsukashii-ipulse-sighting/>&larr; Natsukashii - iPulse Sighting</a></li><li class=post-center>&nbsp;</li><li class=post-next><a href=https://hiltmon.com/blog/2013/04/10/google-analytics-for-status-board/>Google Analytics for Status Board &rarr;</a></li></ul></div></section><aside id=sidebar><script async type=text/javascript src="//cdn.carbonads.com/carbon.js?serve=CKYI52JE&placement=hiltmoncom" id=_carbonads_js></script><section><div id=carbonads></div>&nbsp;</section><section><h1>The Hiltmon Dot Com</h1><p><strong>Hilton Lipschitz</strong> (<a href=https://twitter.com/hiltmon>@hiltmon</a>) an independent software consultant, architect, designer and developer at <a href=https://noverse.com>Noverse LLC</a> (his own small business).</p><p>For the past 22 years he has specialized in the architecture, design, development, operations and trading of bespoke comprehensive front-to-back, multi-asset, <em>automated and algorithmic</em> trading, portfolio management and asset management systems to enable and grow three asset managers.</p><p><a href=https://mastodon.social/@hiltmon rel=me>Mastodon</a> &#183;
<a href=https://twitter.com/hiltmon>Twitter</a> &#183;
<a href=https://github.com/hiltmon>Github</a> &#183;
<a href=https://www.linkedin.com/in/hiltmon/>LinkedIn</a> &#183;
<a href=https://hiltmon.com/index.xml>RSS</a></p></section><section><h1>Recent Posts</h1><ul><li><a class=sidebar-link href=https://hiltmon.com/blog/2023/01/01/increasing-file-descriptor-ulimit-on-macos/>Increasing File Descriptor Ulimit on MacOS</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/12/21/who-dares-wins/>Who Dares, Wins</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/11/03/update-hugo-for-node-16-github-pages/>Update Hugo for Node 16 Github Pages</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/11/03/two-months-with-the-m1-macbook-pro/>Two Months with the M1 Macbook Pro</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/26/where-the-rights-are/>Where the Rights Are</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/20/innocuous-birthday-career-advice/>Innocuous Birthday Career Advice</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/12/go-to-where-the-puck-is-going/>Go to Where the Puck Is Going</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/04/hiltmonism-discoverability-is-deserved/>Discoverability Is Deserved</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/09/13/what-did-i-create-as-an-asset-manager-cto/>What Did I Create as an Asset Manager CTO</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/08/22/optimizing-short-form-writing-for-developers/>Optimizing Short Form Writing for Developers</a></li></ul><section></aside><footer id=footer><p>Copyright &copy; 2023 Hilton Lipschitz</p></footer></div></body></html>