<!doctype html><html><head><meta charset=utf-8><meta name=keywords content><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFJ7SZKLR0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZFJ7SZKLR0",{anonymize_ip:!1})}</script><meta name=robots content="index,follow"><link rel=stylesheet href=https://hiltmon.com/css/main.css><link rel=stylesheet href=https://hiltmon.com/css/all.css><link rel=stylesheet href=https://hiltmon.com/css/carbon.css><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic' rel=stylesheet type=text/css><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script><title>Merge Asana Projects into OmniFocus</title></head><body><div id=container><header id=header><img id=logo src=https://hiltmon.com/images/hiltmon-logo-174.png><h1 id=title><a href=https://hiltmon.com/>Hiltmon</a></h1><h2 id=sub-title>On walkabout in life and technology</h2></header><nav id=menu><ul><li><a href=https://hiltmon.com/about/ title="about me">About</a></li><li><a href=https://hiltmon.com/ title="blog section">Blog</a></li><li><a href=https://hiltmon.com/code/ title=code>Code</a></li><li><a href=https://hiltmon.com/tags/ title="tags section">Tags</a></li><li><a href=https://hiltmon.com/archives/ title="archives section">Archives</a></li></ul></nav><section id=content><p class=meta-data><span class=post-date>Nov 3, 2013 5:51 PM</span></p><div class=tag-group></div><h1 class=post-title>Merge Asana Projects into OmniFocus</h1><div class=post-body><figure class=image-right><img src=images/asana_to_omnifocus.png width=363 height=130></figure><p><strong>Note: Updated the script, see <a href=https://hiltmon.com/blog/2015/03/01/merge-asana-projects-into-omnifocus-updated/>Merge Asana Projects Into OmniFocus Updated</a>.</strong></p><p>I use <a href="https://itunes.apple.com/us/app/omnifocus/id402835630?mt=12&uo=4&at=10l894">OmniFocus</a> to manage my personal tasks and activities, but my company uses <a href=https://asana.com/>Asana</a> to manage Project tasks and activities amongst the team. I am so used to using OmniFocus that I often forget to check or update Asana, and thus miss tasks assigned to me or progress by the team.</p><p>Wouldn&rsquo;t it be nice if the projects and tasks in Asana also appeared in OmniFocus? And were updated when they changed in Asana?</p><p>So I wrote a script to import Asana Projects and Tasks, and then to update them as they change in Asana.</p><p><strong>Download</strong>: <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca><del>Gist 9786291</del>Gist &ldquo;merge_asana_into_omnifocus.rb&rdquo;</a> <span class=light>Read below on how to set it up and run it. Warning: Alpha!</span></p><p>What the <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca>script</a> does is:</p><ol><li>Scans Asana for all projects and creates an OmniFocus project in the folder <strong>Asana</strong>. It also ignores archived projects in Asana as you do not need to see those.</li><li>Scans each project for tasks and creates an OmniFocus task for it. It also captures the notes and due date for the task. If the task is subsequently completed in Asana, it will complete the task in OmniFocus. If the task does not exist in OmniFocus and is already completed, it will not create it.</li><li>If you are <em>not</em> the assignee (the person the task is associated with), it creates a context under <strong>People</strong> for the assignee (so you can see who the task is for - and leaves the context blank for yourself). This is necessary as the Asana API returns all tasks for a project no matter the assignee.</li><li>If there are sub-tasks to the task, the script will create those as well (with notes, due dates, completion status and context). You can turn this off in the script if you do not use sub-tasks to speed up merges.</li><li>You can run the <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca>script</a> again and again. If a project or task exists, it will be updated <em>and overwritten</em> with the changes in Asana.</li></ol><p>The <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca>script</a> <strong>does not</strong>:</p><ol><li><em>The script does not</em> sync data back to Asana. This is a one way <em>merge-in</em>. I have no way to track Asana id&rsquo;s and keep things in sync. <strong>You still have to maintain and complete tasks in Asana</strong></li><li>The script screws up if the task or project name changes. It uses these names to match OmniFocus, not ID&rsquo;s. Since <em>most of the time</em> we never change the project or task name, this works.</li><li><em>The script does not</em> track any tasks that are <em>not</em> part of a project. My needs were for the team tasks in projects to be visible to me in OmniFocus and I do not use the Asana Inbox for anything, its all in OmniFocus. <span class=light>If you have the skill, you may be able to use the Asana workspace call to get these too.</span></li><li>The script also ignores all comments, history and attachments, that&rsquo;s what Asana is good for.</li><li><em>The script does not</em> do your tasks for you.</li></ol><h3 id=prerequisites>Prerequisites</h3><p>Make sure you have the following set up in OmniFocus:</p><figure class=left-right><img src=images/asana_asana.png width=212 height=103></figure><figure class=image-right><img src=images/asana_context.png width=212 height=104></figure><ul><li>A Project Folder called <strong>Asana</strong> in Library.</li><li>A context called <strong>People</strong> under all Contexts.</li></ul><h3 id=setup>Setup</h3><p>Log into Asana and go into your account (It&rsquo;s at the bottom left just above the <strong>Help</strong> link).</p><p>Make a note of your Profile Name, you&rsquo;ll need it in the script.</p><figure><img src=images/asana_profile.png width=543 height=222></figure><p>Click on <strong>Apps</strong> to get your API Key. Click on the <strong>API Key&mldr;</strong> link to see it. Note that down too.</p><figure><img src=images/asana_api_key.png width=533 height=341></figure><p>Open the <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca>script</a> in a text editor and insert your API key and Profile Name at the top.</p><pre tabindex=0><code>...
class MergeAsanaIntoOmnifocus

	API_KEY = &#39;&lt;YOUR KEY HERE&gt;&#39;
	ASIGNEE_NAME = &#39;&lt;YOUR PROFILE NAME HERE&gt;&#39;
	SUBTASKS = true

	def get_json_data(url_string)
	...
</code></pre><p>Download: <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca><del>Gist 9786291</del>Gist &ldquo;merge_asana_into_omnifocus.rb&rdquo;</a></p><h3 id=running-it>Running It</h3><p>Make sure that the prerequisites are set up in OmniFocus and Asana.</p><p>Then just run it from the command line:</p><pre><code>$ ruby merge_asana_into_omnifocus.rb
</code></pre><p>It will display each project as it finds it, and each task as it searches for subtasks so you can see progress.</p><p>The script is not very quick. It has to run a bunch of AppleScripts to talk to OmniFocus, so please be patient.</p><p>To update with the latest data from Asana, just run it again.</p><h3 id=tips>Tips</h3><ul><li>Make sure you run the script before you archive Asana projects so that their tasks are marked as completed in OmniFocus first.</li><li>I prefer to use short project names because they fit the sidebar in OmniFocus. You may want to clean up your Asana before running this the first time.</li><li>Since Asana and OmniFocus treat subtasks differently, I have chosen to use the assignee from the task on sub-tasks unless they are overridden. OmniFocus ignores context on parent tasks.</li></ul><p><span class=light>Warning: This is just my script, it may or may not work for you. <strong>Backup your OmniFocus before running it the first time.</strong> And use at your own peril. <em>Inelegant, alpha-level, probably quite buggy, my first AppleScripts, you get the drift.</em></span></p><p>But if you do use it, let me know in the comments or via Twitter. And if you have any ideas for changes or enhancements, let me know.</p><p>Download: <a href=https://gist.github.com/hiltmon/d1f79e95dd11252ce6ca><del>Gist 9786291</del>Gist &ldquo;merge_asana_into_omnifocus.rb&rdquo;</a></p><p><em>Follow the author as <a href=https://twitter.com/hiltmon>@hiltmon</a> on Twitter and <a href=http://alpha.app.net/hiltmon>@hiltmon</a> on App.Net. Mute <code>#xpost</code> on one.</em></p></div><p class=post-mark><span class="fas fa-envelope"></span>
<span>Posted By Hilton Lipschitz</span>
&#183;
<span class="fas fa-clock"></span>
<span>Nov 3, 2013 5:51 PM</span></p><div class=pagination><ul><li class=post-previous><a href=https://hiltmon.com/blog/2013/11/09/textmate-2-basics/>&larr; TextMate 2 Basics</a></li><li class=post-center>&nbsp;</li><li class=post-next><a href=https://hiltmon.com/blog/2013/10/23/apples-and-rotten-oranges/>Apples and Rotten Oranges &rarr;</a></li></ul></div></section><aside id=sidebar><script async type=text/javascript src="//cdn.carbonads.com/carbon.js?serve=CKYI52JE&placement=hiltmoncom" id=_carbonads_js></script><section><div id=carbonads></div>&nbsp;</section><section><h1>The Hiltmon Dot Com</h1><p><strong>Hilton Lipschitz</strong> (<a href=https://twitter.com/hiltmon>@hiltmon</a>) an independent software consultant, architect, designer and developer at <a href=https://noverse.com>Noverse LLC</a> (his own small business).</p><p>For the past 22 years he has specialized in the architecture, design, development, operations and trading of bespoke comprehensive front-to-back, multi-asset, <em>automated and algorithmic</em> trading, portfolio management and asset management systems to enable and grow three asset managers.</p><p><a href=https://mastodon.social/@hiltmon>Mastodon</a> &#183;
<a href=https://twitter.com/hiltmon>Twitter</a> &#183;
<a href=https://github.com/hiltmon>Github</a> &#183;
<a href=https://www.linkedin.com/in/hiltmon/>LinkedIn</a> &#183;
<a href=https://hiltmon.com/index.xml>RSS</a></p></section><section><h1>Recent Posts</h1><ul><li><a class=sidebar-link href=https://hiltmon.com/blog/2023/01/01/increasing-file-descriptor-ulimit-on-macos/>Increasing File Descriptor Ulimit on MacOS</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/12/21/who-dares-wins/>Who Dares, Wins</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/11/03/update-hugo-for-node-16-github-pages/>Update Hugo for Node 16 Github Pages</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/11/03/two-months-with-the-m1-macbook-pro/>Two Months with the M1 Macbook Pro</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/26/where-the-rights-are/>Where the Rights Are</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/20/innocuous-birthday-career-advice/>Innocuous Birthday Career Advice</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/12/go-to-where-the-puck-is-going/>Go to Where the Puck Is Going</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/04/hiltmonism-discoverability-is-deserved/>Discoverability Is Deserved</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/09/13/what-did-i-create-as-an-asset-manager-cto/>What Did I Create as an Asset Manager CTO</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/08/22/optimizing-short-form-writing-for-developers/>Optimizing Short Form Writing for Developers</a></li></ul><section></aside><footer id=footer><p>Copyright &copy; 2023 Hilton Lipschitz</p></footer></div></body></html>