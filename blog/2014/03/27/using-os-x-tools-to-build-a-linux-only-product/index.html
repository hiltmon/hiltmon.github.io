<!doctype html><html><head><meta charset=utf-8><meta name=keywords content><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFJ7SZKLR0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZFJ7SZKLR0",{anonymize_ip:!1})}</script><meta name=robots content="index,follow"><link rel=stylesheet href=https://hiltmon.com/css/main.css><link rel=stylesheet href=https://hiltmon.com/css/all.css><link rel=stylesheet href=https://hiltmon.com/css/carbon.css><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic' rel=stylesheet type=text/css><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script><title>How I use OS X Tools to build a Linux-only Product</title></head><body><div id=container><header id=header><img id=logo src=https://hiltmon.com/images/hiltmon-logo-174.png><h1 id=title><a href=https://hiltmon.com/>Hiltmon</a></h1><h2 id=sub-title>On walkabout in life and technology</h2></header><nav id=menu><ul><li><a href=https://hiltmon.com/about/ title="about me">About</a></li><li><a href=https://hiltmon.com/ title="blog section">Blog</a></li><li><a href=https://hiltmon.com/code/ title=code>Code</a></li><li><a href=https://hiltmon.com/tags/ title="tags section">Tags</a></li><li><a href=https://hiltmon.com/archives/ title="archives section">Archives</a></li></ul></nav><section id=content><p class=meta-data><span class=post-date>Mar 27, 2014 8:43 PM</span></p><div class=tag-group></div><h1 class=post-title>How I use OS X Tools to build a Linux-only Product</h1><div class=post-body><figure class=image-right><img src=images/osx-mavericks-100px.png width=100 height=91></figure><p>OS X really is a developer&rsquo;s dream platform, a solid UNIX core on which <em>almost</em> everything compiles with a brilliant graphical environment hosting the most amazing developer tools.</p><p><strong>It&rsquo;s the &ldquo;<em>almost</em>&rdquo; in the above sentence that has recently tripped me up.</strong></p><p>I have a new vendor library that does not compile or run on OS X (yet!). As this is a big project which I will be working on for months, I want to set up my development environment so that I am comfortable and productive.</p><figure class=image-right><img src=images/tux-100px.png width=100 height=117></figure><p>The simple solution is to spin up a Linux VM with a GUI or a set of <code>vim</code> shells, and code away. With this simple solution I can tune the environment to match production, compile and build the product using this vendor library and know that it works.</p><p>But to use this simple solution, I need to learn different keyboard shortcuts, copy and paste are weird, there&rsquo;s no integration with my current platform, and the code is locked inside the VM. It violates my preferred <a href=https://hiltmon.com/blog/2014/03/15/develop-locally/>Develop Locally, Stage Nearby, Production Anywhere</a> model. In short, doable but sufficiently different to make me pause.</p><p><strong>The real issue here is not one of which platform is better or worse, the problem is <em>me</em>.</strong> I am working in parallel on a bunch of other OS X only projects using the same toolset in an environment that I have tuned and practiced on for years. Do I want to build the muscle memory and productivity tools on yet another platform, or can I somehow make the current set work? Can I deal with the frustration of having to switch working contexts, keyboard shortcuts and tools to do this? And do I have the time to set it up and develop the productivity mindset.</p><p>The answers are all <strong>no</strong>. I am building core product for a new business, I have deadlines and each hour I spend in setting up or learning a new platform is an hour <em>not</em> spent creating the products we need.</p><p>It would be much nicer if I could use my tried and true, native OS X tools and yet still compile and build this pure-Linux product.</p><p>So I found a way that works for me.</p><p>Sure its a case of a few hacks and hassles, but this is the <em>one and only</em> long term Linux project I have that is part of a lot of other OS X projects (many that deploy to Linux but can be developed locally).</p><p>My chosen solution is to do everything as usual on OS X, using the usual tools, local folders and standards, and run a micro-VM with mounted shared folders and <code>ssh</code> to handle the compile and run part (the one and only one thing I cannot do on OS X). I get all the productivity I am used to from OS X and its tools, and still build and run on a production-compatible system.</p><h3 id=in-summary>In Summary</h3><p>Here&rsquo;s how it works. Keep in mind that the source code is local, only compile and run happens on a local micro-VM:</p><ul><li>I launch <a href=http://www.vmware.com/products/fusion>VMWare Fusion</a> which resumes the minimal <a href=http://www.centos.org>Centos 6.5</a> VM that matches production (no GUI, minimal Linux install, nothing else running). Then hide it away.</li><li>I use a shortcut key in <a href=https://hiltmon.com/blog/2013/02/13/make-iterm-2-more-mac-like/>iTerm 2</a> to open a<code>ssh</code> session to this VM and use a <code>bash</code> alias to<code>cd</code> to the mounted, shared folder where the code on my computer can be found.</li><li>I launch <a href=https://developer.apple.com/xcode/>Xcode</a>, open the project locally as usual, and start programming.</li><li>I compile and build in the <code>ssh</code> terminal. <em>This is the only step different to all other projects.</em></li><li>I do everything else using local tools on OS X.</li></ul><figure><img src=images/linux-only-1.png width=681 height=439></figure><p>And I am maximally productive because I have not really had to change a thing about how I work.</p><h3 id=in-detail>In Detail</h3><p>The VM (called &lsquo;Witch&rsquo;) runs on my laptop&rsquo;s installation of VMWare Fusion. Since I use minimal Linux installs on our production servers, I did the same here. All I added were the <code>Developer Tools</code> and dependent libraries needed using the standard <code>yum</code> install process. And, of course, I copied over the vendor library and set up <code>ssh</code> access.</p><figure class=image-right><img src=images/linux-only-2.jpg width=350 height=176></figure><p>The settings for the VM in VMware are such that networking is local to my laptop (nice and safe), and it mounts my shared folders automatically so it can get to the code.</p><p>And that&rsquo;s the secret. <em>The VM &ldquo;sees&rdquo; the code as local to it while I see it as local to me.</em></p><figure class=left-right><img src=images/linux-only-3.jpg width=375 height=100></figure><p>These shared folders can be found in <code>/mnt/hgfs</code> by default (you need to make sure VMWare tools are installed and running).</p><p>I also set an alias in the VM&rsquo;s <code>.bash_profile</code> that enables me to <code>cd</code> to my project folder easily:</p><pre><code>alias cdsc='cd /mnt/hgfs/Projects/Client/ProjectName/'
</code></pre><p>In iTerm 2, I created a profile with a shortcut key (in this case <code>⌃⌘W</code> for &ldquo;Witch&rdquo;) to launch an <code>ssh</code> terminal session to this VM using my preferred development login.</p><figure><img src=images/linux-only-4.png width=678 height=410></figure><p>And finally, I created the Xcode project using my <a href=https://hiltmon.com/blog/2013/07/05/xcode-and-the-simple-c-plus-plus-project-structure/>Xcode and the Simple C++ Project Structure</a> and <a href=https://hiltmon.com/blog/2013/07/07/xcode-4-code-completion-for-external-build-projects/>Xcode 4 Code Completion for External Build Projects</a> standards.</p><p>Code in Xcode, <code>⌘⇥</code> to the shell to compile and run, <code>⌘⇥</code> back to code some more. <em>And if I use the Xcode compiler, well, linking fails as the vendor library is not compatible, but all the other IDE features work just fine so compilation errors are easy to detect.</em></p><h3 id=quick-start-this-environment>Quick Start this Environment</h3><p>Since I switch between many projects every day, I automated it such that I can get this environment up in seconds. When I want to work on this project, I:</p><ul><li>Launch VMWare using <a href=http://www.alfredapp.com>Alfred</a>, which resumes the VM automatically.</li><li>Launch iTerm 2 (on my system that&rsquo;s <code>⌃⌘T</code>) then press <code>⌃⌘W</code> to open the SSH terminal in a tab. I then type <code>cdsc</code> to change to the project folder.</li><li>Open Xcode, and off I go.</li></ul><h3 id=benefits>Benefits</h3><p>The benefits to me are manyfold:</p><ul><li>I get to use the tools I use on all other projects for this one, thereby maximizing my own productivity.</li><li>I get to build and run the program in its natural environment so I know it will compile and run in production.</li><li>It&rsquo;s all local, on my hard drive, accessible to all my tools which means I can work on this project anywhere, anytime on my laptop, and it gets backed up via Time Machine (and of course pushed to a <code>git</code> server).</li><li>I do not have to remember which context or environment I am in and the keys and shortcuts that match, I simply remain in an OS X context.</li><li>And <em>when</em> the vendor sends me an OS X version of the library, it will just work without me changing a thing. I will just have to press <code>⌘B</code> to build and run it from Xcode.</li></ul><p>I think that I did this mainly because I do have so many other projects I work on every day in OS X. I did not want this one to be any different. Instead of learning something new or different, I chose to bend this project to my will. I think if I did more of these pure Linux projects, it would obviously be better to set up, configure and make productive a true Linux development environment. But I need to be writing code and shipping product not learning new things right now.</p><p>So I found a way to use my OS X tools and shortcuts and productivity aids to build a very native Linux-only product.</p><p>Maybe some of the ideas and tricks in this post can help you with your second platform development.</p><p><em>Follow the author as <a href=https://twitter.com/hiltmon>@hiltmon</a> on Twitter and <a href=http://alpha.app.net/hiltmon>@hiltmon</a> on App.Net. Mute <code>#xpost</code> on one.</em></p></div><p class=post-mark><span class="fas fa-envelope"></span>
<span>Posted By Hilton Lipschitz</span>
&#183;
<span class="fas fa-clock"></span>
<span>Mar 27, 2014 8:43 PM</span></p><div class=pagination><ul><li class=post-previous><a href=https://hiltmon.com/blog/2014/03/29/its-that-process-that-is-the-magic/>&larr; It's that process that is the magic</a></li><li class=post-center>&nbsp;</li><li class=post-next><a href=https://hiltmon.com/blog/2014/03/20/open-source-compiles-in-an-xcode-5-world/>Open Source Compiles in an Xcode 5.1 World &rarr;</a></li></ul></div></section><aside id=sidebar><script async type=text/javascript src="//cdn.carbonads.com/carbon.js?serve=CKYI52JE&placement=hiltmoncom" id=_carbonads_js></script><section><div id=carbonads></div>&nbsp;</section><section><h1>The Hiltmon Dot Com</h1><p><strong>Hilton Lipschitz</strong> (<a href=https://twitter.com/hiltmon>@hiltmon</a>) an independent software consultant, architect, designer and developer at <a href=https://noverse.com>Noverse LLC</a> (his own small business).</p><p>For the past 22 years he has specialized in the architecture, design, development, operations and trading of bespoke comprehensive front-to-back, multi-asset, <em>automated and algorithmic</em> trading, portfolio management and asset management systems to enable and grow three asset managers.</p><p><a href=https://twitter.com/hiltmon>Twitter</a> &#183;
<a href=https://github.com/hiltmon>Github</a> &#183;
<a href=https://www.linkedin.com/in/hiltmon/>LinkedIn</a> &#183;
<a href=https://hiltmon.com/index.xml>RSS</a></p></section><section><h1>Recent Posts</h1><ul><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/20/innocuous-birthday-career-advice/>Innocuous Birthday Career Advice</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/12/go-to-where-the-puck-is-going/>Go to Where the Puck Is Going</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/10/04/hiltmonism-discoverability-is-deserved/>Discoverability Is Deserved</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/09/13/what-did-i-create-as-an-asset-manager-cto/>What Did I Create as an Asset Manager CTO</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/08/22/optimizing-short-form-writing-for-developers/>Optimizing Short Form Writing for Developers</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2022/08/10/code-review-is-not-all-about-the-code/>Code Review is not all about the Code</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2020/06/07/working-from-home-88-days-later/>Working from Home ... 88 Days Later</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2020/03/14/working-from-home-dot-dot-dot-here-we-go/>Working from Home ... here we go!</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2019/12/31/the-theater-was-empty/>The Theater was Empty</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2019/02/16/an-ipad-and-a-pencil/>An iPad and a Pencil</a></li></ul><section></aside><footer id=footer><p>Copyright &copy; 2022 Hilton Lipschitz</p></footer></div></body></html>