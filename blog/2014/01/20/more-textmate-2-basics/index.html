<!doctype html><html><head><meta charset=utf-8><meta name=keywords content><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFJ7SZKLR0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZFJ7SZKLR0",{anonymize_ip:!1})}</script><meta name=robots content="index,follow"><link rel=stylesheet href=https://hiltmon.com/css/main.css><link rel=stylesheet href=https://hiltmon.com/css/all.css><link rel=stylesheet href=https://hiltmon.com/css/carbon.css><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic' rel=stylesheet type=text/css><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script><title>More TextMate 2 Basics</title></head><body><div id=container><header id=header><img id=logo src=https://hiltmon.com/images/hiltmon-logo-174.png><h1 id=title><a href=https://hiltmon.com/>Hiltmon</a></h1><h2 id=sub-title>On walkabout in life and technology</h2></header><nav id=menu><ul><li><a href=https://hiltmon.com/about/ title="about me">About</a></li><li><a href=https://hiltmon.com/code/ title=code>Code</a></li><li><a href=https://hiltmon.com/ title="blog section">Blog</a></li><li><a href=https://hiltmon.com/archives/ title="archives section">Archives</a></li></ul></nav><section id=content><p class=meta-data><span class=post-date>Jan 20, 2014 2:07 PM</span></p><div class=tag-group><div class=tag><span class=tag-text>| <a href=https://hiltmon.com/tags/text-editors>Text Editors</a></span></div><div class=tag><span class=tag-text>| <a href=https://hiltmon.com/tags/textmate>TextMate</a></span></div></div><h1 class=post-title>More TextMate 2 Basics</h1><div class=post-body><figure class=image-right><img src=images/textmate.png width=128 height=128></figure><p>Previously, I wrote about the <a href=https://hiltmon.com/blog/2013/11/09/textmate-2-basics/>TextMate 2 Basics</a> that I use all the time, and I recommend you read <a href=https://hiltmon.com/blog/2013/11/09/textmate-2-basics/>that</a> post first. This post follows up with a <em>mish-mash</em> of more tools, ideas and tricks that I also use surprisingly frequently.</p><h2 id=text-tools>Text Tools</h2><p>TextMate 2 tries to reduce the number of keystrokes you need to make to generate good code. There are many ways it does this but today I want to talk about <em>auto-pairs</em> and <em>completions</em>.</p><h3 id=auto-pairing>Auto-pairing</h3><p>Auto-pairing is when you type in a character that should be paired in code, and the editor ensures the paired character is also inserted. For example, pressing the <code>(</code> key inserts a <code>)</code> as well (and where the caret is between the paired characters). This works well for all brace keys (<code>[</code>, <code>(</code> and <code>{</code>) and quote (<code>'</code> and <code>"</code>) characters.</p><figure class=image-right><img src=images/tm-2-basics-2-1.png width=140 height=210></figure><p>But TextMate takes it to the next level:</p><ul><li><p><strong>Wrap Selected</strong>: Select some text and press the opening key in an auto-pair set. Instead of replacing the selection with the key pressed like other editors do, TextMate wraps that selection in the correct pair.</p><p>For example, to to correctly bracket an expression such as <code>a / b + c</code>, select the <code>b + c</code> bit using ⌥⌘← and hit <code>(</code> to get <code>a / (b + c)</code>.</p><br></li></ul><figure class=image-right><img src=images/tm-2-basics-2-2.png width=200 height=210></figure><ul><li><p><strong>String Interpolation</strong>: In Ruby, you can interpolate a variable&rsquo;s value in a string using the <code>#{}</code> construct. TextMate is aware of the context and if you press the <code>#</code> key inside a string that can be interpolated, TextMate uses auto-pairing to wrap the selection in the interpolation braces.</p><p>For example, to convert <code>user_name</code> in the following line <code>puts "Name: user_name"</code>, select <code>user_name</code> and press <code>#</code> to get <code>puts "Name: #{user_name}"</code>.</p><p>Note also that if the string does not support interpolation (a single quoted string), pressing <code>#</code> inserts a <code>#</code> character only. Smart.</p></li></ul><p>Of course the big problem with auto-pairing is that in most other editors, you need to then navigate past the closing pair character to continue working. In TextMate, if you type the closing character manually, it knows, and just moves your caret along without duplicating the close. Or you can use <code>⌘↩</code> to go to a new line, leaving the closed pairs behind, or <code>⌘→</code> to navigate over all the closes.</p><h3 id=tab-and-esc-completions>Tab and Esc Completions</h3><p>TextMate has two kinds of completions, &ldquo;tab&rdquo; (⇥) completions and
&ldquo;esc&rdquo; (⎋) completions.</p><figure class=image-right><img src=images/tm-2-basics-2-3.png width=200 height=170></figure><p><strong>Tab completions</strong> were invented in TextMate and have improved in TextMate 2. Tab completions operate by typing in a few letters and pressing the tab (⇥) key. TextMate attempts to match the characters before the cursor to the tab completions available for that language or context, and if a match is found, it puts the completion in. For example, in Ruby, typing <code>def⇥</code> will insert <code>def function_name\n\nend</code> and highlights <code>function_name</code> for you to overtype.</p><br><figure class=image-right><img src=images/tm-2-basics-2-4.png width=360 height=231></figure><p>You can find the currently available tab completions in the cog menu at the bottom for each language. The best way to learn them is to see what is available and then start using them. For example, in Ruby, I always use <code>cla⇥</code> to create Ruby classes, <code>mod⇥</code> to create Ruby modules and <code>ea⇥</code> for quick <code>each</code> loops. I strongly recommend you check out and learn the tab completions for our favorite languages in TextMate. You will save a ton of keystrokes.</p><p>Note that TextMate is aware at all times on the language context you are in. Which means that different language completions are available in different parts of a code file. For example, in a Rails <code>.erb</code> file, HTML completions are available unless you are inside a <code>&lt;% ... %></code> construct, in which case, Ruby tab completions work.</p><figure class=image-right><img src=images/tm-2-basics-2-5.png width=200 height=230></figure><p><strong>Esc completion</strong> saves you keystrokes within a code file by completing <em>function</em> and <em>variable</em> names that exist in the <em>current</em> file. <span class=light>To get project level completions, you need to look at <code>ctags</code> which I intend to cover in a future post.</span></p><p>Start typing a function or variable name that already exists and press the esc (⎋) key to see the first recommended match. Press ⎋ again to find another match or cycle through the choices.</p><p><strong>Just remember, in completions, tab (⇥) is for code, esc (⎋) is for names.</strong></p><h2 id=the-file-browser>The File Browser</h2><p>The File Browser has changed completely in TextMate 2 and it took me a while to get used to it. This is because the <em>new</em> file browser is more like a Finder window than the old project file manager.</p><p>To switch between the editor and the File Browser without using the mouse, hit <code>⌃⌘⇥</code> (Control-Command-Tab). You can then use the arrow keys to navigate the tree. Use <code>⌘↓</code> to open the selected file (just like Finder). When in the editor, to reveal the current file in the file browser, hit <code>⌃⌘r</code> (&ldquo;Reveal&rdquo;).</p><p>If you mouse instead (like I do), <strong>single-click the file icon to open it in the editor.</strong> Single-clicking the name just selects it (just like Finder). Double-clicking the file name opens the file too. <em>Once you get used to single-clicking the icon, opening files becomes so much easier.</em></p><h2 id=editor-tabs>Editor Tabs</h2><p>The tabs at the top are also smart in TextMate 2. If you have the file browser open and request a file that is in the same tree as the currently open folder, it opens in a new tab. If not, it opens in a new window. TextMate therefore tabs or windows depending on the context of the file, automatically determining project membership. This even works when you use <code>mate &lt;filename></code> from the command-line.</p><p>We all open a lot of tabs as we work, especially in Rails development. And it&rsquo;s a pain to close each tab individually. If you <code>⌥-click</code> on a tab close button, all other <em>saved</em> tabs will close.</p><p>You can also drag a tab out of the tab bar (or double-click on it) to move it to a new window. If you want it back, use the <strong>Window / Merge All Windows</strong> menu. Currently this merges all windows into one, here&rsquo;s hoping they use the smart logic for creating tabs and windows to find a way to merge to project-based windows someday.</p><h2 id=fonts-and-themes>Fonts and Themes</h2><figure><img src=images/tm-2-basics-2-6.jpg width=700 height=245></figure><p>Since we all have different tastes and preferences, TextMate comes with a lovely set of built-in themes which are fully customizable. You can change the theme from the <strong>View / Theme</strong> menu.</p><p>To install a new theme, download a <code>.tmTheme</code> file and double-click it. Then look for the new theme on the <strong>View / Theme</strong> menu. I use my own <a href=https://hiltmon.com/files/CombinedCasts.tmTheme>CombinedCasts.tmTheme</a> theme (See <a href=https://hiltmon.com/blog/2013/02/22/multiple-themes-in-textmate-2/>Multiple Themes in TextMate 2 - The Hiltmon</a>) but there are hundreds out there to choose from.</p><figure class=image-right><img src=images/tm-2-basics-2-7.jpg width=300 height=189></figure><p>In my case, I have set TextMate to be the default editor for all my script file formats, from <code>.sh</code> to <code>.rb</code> and <code>.py</code>. I also use QuickLook a lot to browse code files before opening them. If TextMate is the default for a file, it&rsquo;s QuickLook generator is used and it now renders code files using your selected theme. A nice touch.</p><p>One recent change in TextMate 2 has been the way it accesses and uses fonts. I highly recommend using the <strong>View / Fonts / Show Fonts</strong> menu at least once after changing a theme to select the font and size that you prefer. Some old themes use incorrect names for fonts and the new model guesses incorrectly. If you have a global <code>.tm_properties</code> file and set your font there, make sure the name is the correct there too.</p><h2 id=script-writing-tips>Script Writing Tips</h2><p>If you use TextMate to write Shell, Ruby or Python scripts, use the environment string (or &ldquo;shebang&rdquo; <code>#!</code>) to make things easier to run:</p><figure class=image-right><img src=images/tm-2-basics-2-8.png width=200 height=210></figure><ul><li>Start each file with the right environment string. This helps the shell know what runtime to use to execute the file. Type <code>env⇥</code> at the top of the file and TextMate will insert the correct environment &ldquo;shebang&rdquo; into the file. <strong>It will also mark the file as executable on first save.</strong> So instead of running <code>ruby my_script.rb</code>, you can just type <code>my_script.rb</code> on the command line to run it.</li><li>Speaking of the command line, hitting <code>⌃⇧O</code> (the letter O) will open a fresh terminal session in the current folder of the file. But if you prefer the TextMate output window, <code>⌘r</code> in TextMate will launch the environment specified in the file&rsquo;s &ldquo;shebang&rdquo; and display the output in the output window.</li></ul><h2 id=quick-keyboard-tips>Quick Keyboard Tips</h2><p>Three additional keyboard tricks I use a lot:</p><ul><li><code>⌃"</code>: Toggles between single-quotes (<code>''</code>), double quotes(<code>""</code>) and quoted strings (<code>%Q{}</code>). I use this a lot in Ruby as I normally create strings without interpolation (single-quotes) and then need to change it later. It works on the quotes surrounding the cursor.</li><li><code>⌃_</code>: Toggles the selected name between CamelCase (<code>HomeBrew</code>), underscores (<code>home_brew</code>) and nerdCase (<code>homeBrew</code>), useful when you use the wrong convention in code (especially if you code in multiple languages).</li><li><code>⌃⌥⌘V</code>: Brings up TextMate&rsquo;s clipboard history. Now you can copy, copy, copy, then switch files and paste, paste, paste.</li></ul><h2 id=some-useful-bundle-tips>Some Useful Bundle Tips</h2><h3 id=source-code-control>Source Code Control</h3><p>If you use git, mercurial or subversion, install the matching bundle. You then get the following benefits:</p><ul><li>TextMate shows the current status of each file in the file browser. You can see which files have uncommitted changes instantly.</li><li>The <code>⌘y</code> key brings up a menu of Source Code Control commands that you can use instead of leaving the editor and using the command-line. Options include seeing the changes to be committed, amending commits, viewing branches and of course, the ability to commit changes. The git bundle even has a config option to enable you to change your global settings.</li></ul><h3 id=the-todo-bundle>The TODO Bundle</h3><figure class=image-right><img src=images/tm-2-basics-2-9.png width=300 height=152></figure><p>I don&rsquo;t know about you, but I often leave <code>TODO</code> and <code>HACK</code> comments in my code to remind me about things, <em>and then forget about them</em>. The TODO bundle in TextMate 2 searches the current project tree for comments with <code>TODO</code>, <code>FIXME</code>, <code>CHANGED</code> and <code>RADAR</code> and displays them in the output window. Just hit <code>⌃⇧T</code>. You&rsquo;ll never forget again.</p><br><figure class=image-right><img src=images/tm-2-basics-2-A.png width=300 height=173></figure><p>To add your own markers, go to the cog menu, find the TODO bundle and click <strong>Preferences&mldr;</strong>. Add a new marker and replace the regular expression to catch the rest of the comment. Hit <code>Done</code>, restart TextMate and run TODO again to see your new marker matches.</p><h3 id=sql-bundle>SQL Bundle</h3><p>I only found this one recently, but it comes in handy a lot. I write a lot of code that queries PostgreSQL databases, which means I write a lot of SQL. Many of the processes and views I write contain embedded SQL statements.</p><p>Before finding this bundle, I used to have to copy the SQL from TextMate into NaviCat, test and run it, then copy it back. And I could never be sure that I got it all until I ran the program.</p><figure class=image-right><img src=images/tm-2-basics-2-B.png width=300 height=194></figure><p>The SQL bundle supports MySQL and PostgreSQL only, but it works rather well. Start by setting up your connections in <strong>Cog Menu / SQL / Preferences&mldr;</strong>. Then, to test a SQL statement, just select it in TextMate and hit <code>⌃⇧Q</code>. If TextMate picks the wrong database, open <strong>Cog Menu / SQL / Preferences&mldr;</strong> and highlight the correct database then click <code>Done</code>. <code>⌃⇧Q</code> will run the SQL against the correct database now.</p><br><figure class=image-right><img src=images/tm-2-basics-2-C.png width=300 height=152></figure><p>The output window is also a Database Browser, so you can use it to browse databases, their tables and see what their fields are named while coding.</p><p>The SQL bundle is pretty basic, but for quick and dirty views and tests it works great.</p><h2 id=fin>Fin</h2><p>So those are some more TextMate 2 features that I use all the time. Hopefully you found a few more gems in there that could help you out.</p><p>If you missed the first post, check out <a href=https://hiltmon.com/blog/2013/11/09/textmate-2-basics/>TextMate 2 Basics</a>.</p><p><em>If you have any awesome TextMate 2 features or keys you cannot live without, please share them in the comments.</em></p><p><em>Follow the author as <a href=https://twitter.com/hiltmon>@hiltmon</a> on Twitter and <a href=http://alpha.app.net/hiltmon>@hiltmon</a> on App.Net. Mute <code>#xpost</code> on one.</em></p></div><p class=post-mark><span class="fas fa-envelope"></span>
<span>Posted By Hilton Lipschitz</span>
&#183;
<span class="fas fa-clock"></span>
<span>Jan 20, 2014 2:07 PM</span></p><div class=pagination><ul><li class=post-previous><a href=https://hiltmon.com/blog/2014/02/01/first-they-came-for-dot-dot-dot/>&larr; First they came for...</a></li><li class=post-center>&nbsp;</li><li class=post-next><a href=https://hiltmon.com/blog/2014/01/19/reminder-update-your-tools/>Reminder: Update your Tools &rarr;</a></li></ul></div></section><aside id=sidebar><script async type=text/javascript src="//cdn.carbonads.com/carbon.js?serve=CKYI52JE&placement=hiltmoncom" id=_carbonads_js></script><section><div id=carbonads></div>&nbsp;</section><section><h1>The Hiltmon Dot Com</h1><p><strong>Hilton Lipschitz</strong> (<a href=https://twitter.com/hiltmon>@hiltmon</a>) is CTO of an up and coming Hedge Fund, who loves to craft brilliant and delightful web, iPhone, iPad and Macintosh software products. Before this he was an independent software consultant, designer and developer at <a href=http://www.noverse.com>Noverse LLC</a>.</p></section><section><h1>Recent Posts</h1><ul><li><a class=sidebar-link href=https://hiltmon.com/blog/2020/06/07/working-from-home-88-days-later/>Working from Home ... 88 Days Later</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2020/03/14/working-from-home-dot-dot-dot-here-we-go/>Working from Home ... here we go!</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2019/12/31/the-theater-was-empty/>The Theater was Empty</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2019/02/16/an-ipad-and-a-pencil/>An iPad and a Pencil</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2019/02/09/testing-c-plus-plus-17-project-in-xcode-with-xctest/>Testing C++17 Projects in Xcode with XCTest</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2018/06/17/on-removing-comments/>On Removing Comments</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2018/06/17/stop-and-think/>Stop and Think</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2017/08/31/migrate-octopress-slash-jekyll-posts-to-ulysses/>Migrate Octopress / Jekyll Posts to Ulysses</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2017/03/12/notification-city/>Notification City</a></li><li><a class=sidebar-link href=https://hiltmon.com/blog/2017/03/05/coding-style-standards-in-2017/>Coding Style Standards in 2017</a></li></ul><section></aside><footer id=footer><p>Copyright &copy; 2022 Hilton Lipschitz</p></footer></div></body></html>