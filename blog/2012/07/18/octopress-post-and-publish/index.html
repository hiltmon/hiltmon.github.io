<!doctype html><html><head>
<link rel=stylesheet href=/css/main.css>
<link rel=stylesheet href=/css/all.css>
<link rel=stylesheet href=/css/fusion.css>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic" rel=stylesheet type=text/css>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<title>Octopress Post and Publish</title>
</head>
<body>
<div id=container><header id=header>
<img id=logo src=/images/hiltmon-logo-174.png>
<h1 id=title><a href=/>Hiltmon</a></h1>
<h2 id=sub-title>On walkabout in life and technology</h2>
</header>
<nav id=menu>
<ul>
<li>
<a href=/about/ title="about me">About</a>
</li>
<li>
<a href=/code/ title=code>Code</a>
</li>
<li>
<a href=/products/ title=products>Products</a>
</li>
<li>
<a href=/ title="blog section">Blog</a>
</li>
<li>
<a href=/archives/ title="archives section">Archives</a>
</li>
</ul>
</nav>
<section id=content>
<p class=meta-data>
<span class=post-date>Jul 18, 2012 6:01 PM</span>
</p>
<h1 class=post-title>
Octopress Post and Publish
</h1>
<div class=post-body>
<p>Since this site is getting larger and it&rsquo;s running on <a href=http://octopress.org>Octopress</a>, the <code>rake generate</code> and <code>rake preview</code> processes are getting slower. Enter <code>rake isolate["x"]</code> to isolate the site down to the selected post. But isolating requires me to note the file name down, there is too much to remember and type and I am lazy.</p>
<p>So have created two macros and a script to speed this process up.</p>
<p><strong>Note: You must run these commands in the root of the Octopress folder, else they will not work at all!</strong></p>
<h2 id=post>Post</h2>
<h3 id=the-old-standard-way>The old, standard way</h3>
<p>To create a post in Octopress, isolate it and preview it in the browser, you need to run the following steps:</p>
<p>Create the Post:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>$ rake new_post[<span style=color:#87ceeb>&#34;Octopress Post and Publish&#34;</span>]
</code></pre></div><p>Isolate the post using the generated file name:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>rake isolate[<span style=color:#87ceeb>&#34;octopress-post-and-publish&#34;</span>]
</code></pre></div><p>And generate and start the preview thread:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>rake generate
rake preview
</code></pre></div><p>Note that I have already hacked the <code>new_post</code> function in my Rakefile to also log this to <a href=http://dayoneapp.com>Day One</a> and launch <a href=http://bywordapp.com>Byword</a>, see my post on <a href=https://hiltmon.com/blog/2012/01/23/bread-crumbs-in-day-one/>Bread Crumbs in Day One</a>, so those steps are not shown.</p>
<h3 id=the-new-way>The new way</h3>
<p>For this post, I typed in:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>$ post Octopress Post and Publish
</code></pre></div><p>Note that there is no punctuation after the <code>post</code> command, less for me to type. The script concatenates all parameters into a single title string. The result of the command shows that it does all the steps I did manually, including figuring out the file name, and leaving me in a preview thread:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-text data-lang=text>:: rake new_post[&#34;Octopress Post and Publish&#34;]
mkdir -p source/_posts
:: rake isolate[&#34;octopress-post-and-publish&#34;]
:: rake generate
:: rake preview
[2012-07-18 18:01:34] INFO  WEBrick 1.3.1
[2012-07-18 18:01:34] INFO  ruby 1.9.2 (2011-07-09) [x86_64-darwin11.2.0]
[2012-07-18 18:01:34] INFO  WEBrick::HTTPServer#start: pid=35734 port=4000
</code></pre></div><p> </p>
<h2 id=publish>Publish</h2>
<h3 id=the-old-standard-way-1>The old, standard way</h3>
<p>I would use <code>^C</code> to stop the preview thread, then:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>$ rake integrate
$ rake gen_deploy
</code></pre></div><h3 id=the-new-way-1>The new way</h3>
<p>Now I just use <code>^C</code> to stop the preview thread, and:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>$ publish
</code></pre></div><p> </p>
<h2 id=the-macros-and-scripts>The macros and scripts</h2>
<p>I created the following ruby script to handle the post function. If you want the &ldquo;Open in Byword&rdquo; function, uncomment Line 29: <code>open "#{path}" -a Byword</code> (Untested)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-ruby data-lang=ruby><span style=color:#0f0>#! /usr/bin/ruby</span>

<span style=color:#0f0># post.rb</span>
<span style=color:#0f0># Hilton Lipschitz (https://hiltmon.com) @hiltmon</span>
<span style=color:#0f0># Use and modify freely, attribution appreciated</span>
<span style=color:#0f0>#</span>
<span style=color:#0f0># Create a new Octopress post, isolate it, generate the</span>
<span style=color:#0f0># site and leave me with a preview thread running.</span>
<span style=color:#0f0>#</span>
<span style=color:#0f0># MUST BE RUN in the Octopress root folder</span>
<span style=color:#0f0>#</span>
<span style=color:#0f0># Usage</span>
<span style=color:#0f0># $ new This is a post</span>
<span style=color:#0f0>#</span>
<span style=color:#0f0># NOTE: Do not wrap the parameters in quotes</span>

<span style=color:#0f0># Make the title</span>
post_title = <span style=color:#7fffd4>ARGV</span>.join(<span style=color:#87ceeb>&#39; &#39;</span>)

<span style=color:#0f0># Create the post</span>
puts <span style=color:#87ceeb>&#34;:: rake new_post[</span><span style=color:#87ceeb>\&#34;</span><span style=color:#87ceeb>#{</span>post_title<span style=color:#87ceeb>}</span><span style=color:#87ceeb>\&#34;</span><span style=color:#87ceeb>]&#34;</span>
process = <span style=color:#87ceeb>`rake new_post[&#34;</span><span style=color:#87ceeb>#{</span>post_title<span style=color:#87ceeb>}</span><span style=color:#87ceeb>&#34;]`</span>

<span style=color:#0f0># Parse out the generated filename</span>
file_key = <span style=color:red>nil</span>
process.split(<span style=color:#87ceeb>&#39;\r&#39;</span>).each <span style=color:red>do</span> |line|
  <span style=color:red>next</span> <span style=color:red>unless</span> line =~ <span style=color:#87ceeb>/Creating new post:/</span>
  path = line.split(<span style=color:#87ceeb>&#39;: &#39;</span>)[<span style=color:#f60>1</span>]
  <span style=color:#0f0># `open &#34;#{path}&#34; -a Byword`</span>
  file_basename = path.sub(<span style=color:#87ceeb>&#39;source/_posts/&#39;</span>, <span style=color:#87ceeb>&#39;&#39;</span>).sub(<span style=color:#87ceeb>&#39;.markdown&#39;</span>, <span style=color:#87ceeb>&#39;&#39;</span>)
  file_key = file_basename[<span style=color:#f60>11</span>..(file_basename.length)].chomp
<span style=color:red>end</span>

<span style=color:#0f0># Isolate, generate and preview</span>
<span style=color:red>unless</span> file_key.nil?
  puts <span style=color:#87ceeb>&#34;:: rake isolate[</span><span style=color:#87ceeb>\&#34;</span><span style=color:#87ceeb>#{</span>file_key<span style=color:#87ceeb>}</span><span style=color:#87ceeb>\&#34;</span><span style=color:#87ceeb>]&#34;</span>
  <span style=color:#87ceeb>`rake isolate[&#34;</span><span style=color:#87ceeb>#{</span>file_key<span style=color:#87ceeb>}</span><span style=color:#87ceeb>&#34;]`</span>
  puts <span style=color:#87ceeb>&#34;:: rake generate&#34;</span>
  <span style=color:#87ceeb>`rake generate`</span>
  puts <span style=color:#87ceeb>&#34;:: rake preview&#34;</span>
  <span style=color:#87ceeb>`rake preview`</span>
<span style=color:red>end</span>
</code></pre></div><p>I then added the following two macros to my <code>.bash_profile</code> (OS X users only). Note that I keep all my custom scripts in <code>~/Scripts/</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=color:red>function</span> post {
  ~/Scripts/post.rb <span style=color:#eedd82>$*</span>
}

<span style=color:red>function</span> publish {
  rake integrate
  rake gen_deploy
}
</code></pre></div><p>These work for all my Octopress sites. It allows me to get to the post faster, preview that it looks right and publish the site with ease.</p>
</div>
<p class=post-mark>
<span class="fas fa-envelope"></span>
<span>Posted By Hilton Lipschitz</span>
&#183;
<span class="fas fa-clock"></span>
<span>Jul 18, 2012 6:01 PM</span>
</p>
<div class=pagination>
<ul>
<li class=post-previous><a href=https://hiltmon.github.io/blog/2012/07/19/international-terpstra-day/>&larr; International Terpstra Day</a></li>
<li class=post-center>&nbsp;</li>
<li class=post-next><a href=https://hiltmon.github.io/blog/2012/07/18/estimating-software-like-it-is/>Estimating Software like it is &rarr;</a></li>
</ul>
</div>
</section><aside id=sidebar>
<section>
<h1>The Hiltmon Dot Com</h1>
<p><strong>Hilton Lipschitz</strong> (<a href=https://twitter.com/hiltmon>@hiltmon</a>) is CTO of an up and coming Hedge Fund, who loves to craft brilliant and delightful web, iPhone, iPad and Macintosh software products. Before this he was an independent software consultant, designer and developer at <a href=http://www.noverse.com>Noverse LLC</a>.</p>
</section><section>
<h1>Recent Posts</h1>
<ul>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2020/06/07/working-from-home-88-days-later/>Working from Home ... 88 Days Later</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2020/03/14/working-from-home-dot-dot-dot-here-we-go/>Working from Home ... here we go!</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2019/12/31/the-theater-was-empty/>The Theater was Empty</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2019/02/16/an-ipad-and-a-pencil/>An iPad and a Pencil</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2019/02/09/testing-c-plus-plus-17-project-in-xcode-with-xctest/>Testing C++17 Projects in Xcode with XCTest</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2018/06/17/on-removing-comments/>On Removing Comments</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2018/06/17/stop-and-think/>Stop and Think</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2017/08/31/migrate-octopress-slash-jekyll-posts-to-ulysses/>Migrate Octopress / Jekyll Posts to Ulysses</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2017/03/12/notification-city/>Notification City</a></li>
<li><a class=sidebar-link href=https://hiltmon.github.io/blog/2017/03/05/coding-style-standards-in-2017/>Coding Style Standards in 2017</a></li>
</ul>
<section></aside><footer id=footer>
<p>Copyright &copy; 2022 Hilton Lipschitz</p>
</footer></div>
</body>
</html>